<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.study.mapper.XsSalesorderMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.study.entity.XsSalesorder">
        <id column="order_id" property="orderId" />
        <result column="yh_id" property="yhId" />
        <result column="sales_id" property="salesId" />
        <result column="kh_id" property="khId" />
        <result column="qx__yh_id" property="qxYhId" />
        <result column="order_yard" property="orderYard" />
        <result column="order_name" property="orderName" />
        <result column="goods_time" property="goodsTime" />
        <result column="order_site" property="orderSite" />
        <result column="order_goods" property="orderGoods" />
        <result column="order_linkman" property="orderLinkman" />
        <result column="order_phone" property="orderPhone" />
        <result column="order_money" property="orderMoney" />
        <result column="order_time" property="orderTime" />
        <result column="order_times" property="orderTimes" />
        <result column="order_state" property="orderState" />
    </resultMap>
    <!--    销售订单表查询所有-->
    <select id="selectAll" resultMap="BaseResultMap" parameterType="com.study.entity.XsSalesorder">
        select order_id, yh_id, sales_id, kh_id, qx__yh_id, order_yard, order_name, goods_time,
        order_site, order_goods, order_linkman, order_phone, order_money,
        order_time, order_times, order_state
        from xs_salesorder
        order by order_id desc
    </select>
<!--    销售订单表多条件查询-->
    <select id="selectById" resultMap="BaseResultMap" parameterType="com.study.entity.XsSalesorder">
        select order_id, yh_id, sales_id, kh_id, qx__yh_id, order_yard, order_name, goods_time,
        order_site, order_goods, order_linkman, order_phone, order_money,
        order_time, order_times, order_state
        from xs_salesorder
        <where>
            <if test="orderYard!=null and orderYard!=''">
                and order_Yard like concat('%',#{orderYard},'%')
            </if>
        </where>
    </select>
<!--    销售订单表新增-->
    <insert id="addOrder" useGeneratedKeys="true" keyProperty="orderId">
        insert into xs_salesorder values (#{orderId},#{yhId},#{salesId},#{khId},#{qxYhId},#{orderYard},#{orderName},#{goodsTime},
            #{orderSite},#{orderGoods},#{orderLinkman},#{orderPhone},#{orderMoney},#{orderTime},#{orderTimes},#{orderState})
    </insert>
    <!--    查询最大索引-->
    <select id="selectIdMax" resultType="java.lang.Integer">
        select max(order_id) from xs_salesorder
    </select>
<!--    审核采购订单-->
    <update id="updateOrderSetState" parameterType="com.study.entity.XsSalesorder">
        update xs_salesorder
        <set>
            <if test="orderState!=null and orderState!=''">
                order_state=#{orderState},
            </if>
            <if test="qxYhId!=null and qxYhId!=''">
                qx__yh_id =#{qxYhId},
            </if>
            <if test="orderTimes!=null">
                order_times =#{orderTimes},
            </if>
        </set>
        where order_id=#{orderId}
    </update>
<<<<<<< HEAD
=======
<!--    销售订单表根据orderid查询-->
    <select id="selectByOrderId" resultMap="BaseResultMap" parameterType="com.study.entity.XsSalesorder">
        select order_id, yh_id, sales_id, kh_id, qx__yh_id, order_yard, order_name, goods_time,
               order_site, order_goods, order_linkman, order_phone, order_money,
               order_time, order_times, order_state
        from xs_salesorder
        where order_id = #{orderId}
    </select>
>>>>>>> 49a989ad24102f249fe76034f2e5cf9ccca7e375
</mapper>
